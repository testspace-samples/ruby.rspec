language: ruby

rvm:
  - "2.1.1"

env:
  global:
    - DISPLAY=localhost:1.0
    - secure: JBy36n/1p9Rq+gVKEFhG/ZoLx4kqSBWQ7/GZVvIqwbpIupVrcoPMWompuijNRx1zOmXpRCZBwSEaMZn5P4ZPGEpdOtJrIt6ePAS2VUeH8ojYrv1uY8jCrpYfe5NAjcvCTl6DsloGsY8r3SdY7gx6/3XmkxvNfsD5u7j08Cw5sGapsSh08ndajQr8HyOTFQCAJhVH7PsoZLd4F5hRHNSPPRWbJ26vuBobmNEyZvDbYdJVyFEetclkA4cs5f82HYV9T5T8RRS5nSPzaEsQ6mniPtM6G74a3D4AM5CrnfmQk1RcWMJJu6oHbg2hMXoZWu7yPgVfAashP1zApwdNSdg04A==

addons:
  firefox: "29.0"

services:
  - selenium

before_install:
  - ./testspace_install.sh
  - export PATH="${HOME}/testspace:${PATH}"
  - gem install bundler

before_script:
  - mkdir -p shippable/codecoverage
  - mkdir -p shippable/testresults

script:
  - testspace import .testspace.xml $TESTSPACE_URL
  - xvfb-run --server-args="-screen 0 1024x768x24" testspace run $TESTSPACE_URL

after_script:
  - cp spec/reports/*.xml shippable/testresults
  - cp coverage/coverage.xml shippable/codecoverage
